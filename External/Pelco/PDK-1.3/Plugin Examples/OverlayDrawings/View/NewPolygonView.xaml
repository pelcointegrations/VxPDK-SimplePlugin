<UserControl x:Class="OverlayDrawings.View.NewPolygonView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
             xmlns:local="clr-namespace:OverlayDrawings.View"
             xmlns:model="clr-namespace:OverlayDrawings.Model"
             mc:Ignorable="d" Height="Auto" Width="Auto" d:DesignHeight="450"
             Background="White">

    <UserControl.Resources>
        <model:PointConverter x:Key="PointConverter"/>
        <model:IsPointValidConverter x:Key="IsPointValid"/>
    </UserControl.Resources>

    <Grid>
        <Grid.Resources>
            
        </Grid.Resources>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <GroupBox x:Name="PointsGroup" FontWeight="Medium" Margin="5,10,5,5" Padding="5,10,5,5" Width="Auto" Height="Auto">
            <Grid HorizontalAlignment="Stretch">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Horizontal">
                    <Label ToolTip="New polygon point's normalized x-coordinate [0.0, 1.0]" Grid.Column="1" x:Name="XLabel" Content="X" FontWeight="Normal" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                    <TextBox x:Name="XCoordinate" Grid.Column="2" Width="40" Margin="0,5,0,5"/>
                    <Label ToolTip="New polygon point's normalized y-coordinate [0.0, 1.0]" x:Name="StartYLabel" Grid.Column="3" Content="Y:" FontWeight="Normal" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                    <TextBox x:Name="YCoordinate" Grid.Column="4" Width="40"  Margin="0,5,0,5"/>
                    <Button Content="New Point" BorderBrush="DarkSlateBlue" Grid.Column="5" Margin="5,5,5,5" Command="{Binding Path=AddNewPointCommand}">
                        <Button.CommandParameter>
                            <MultiBinding Converter="{StaticResource PointConverter}">
                                <Binding ElementName="XCoordinate" Path="Text"/>
                                <Binding ElementName="YCoordinate" Path="Text"/>
                            </MultiBinding>
                        </Button.CommandParameter>
                        <Button.IsEnabled>
                            <MultiBinding Converter="{StaticResource IsPointValid}">
                                <Binding ElementName="XCoordinate" Path="Text"/>
                                <Binding ElementName="YCoordinate" Path="Text"/>
                            </MultiBinding>
                        </Button.IsEnabled>
                    </Button>
                    <Button Content="Remove" BorderBrush="DarkSlateBlue" Grid.Column="5" Margin="5,5,5,5" Command="{Binding Path=RemovePointsCommand}" IsEnabled="{Binding ElementName=PointsList, Path=SelectedItems.Count}" CommandParameter="{Binding ElementName=PointsList, Path=SelectedItems}"/>
                    <Button Content="Clear" BorderBrush="DarkSlateBlue" Grid.Column="5" Margin="5,5,5,5" Command="{Binding Path=ClearPointsCommand}"/>
                </StackPanel>
                <Separator Grid.Row="2" Grid.ColumnSpan="6" Margin="5,0,5,5"/>
                <ListBox x:Name="PointsList" SelectionMode="Multiple" Grid.Row="3" Grid.ColumnSpan="6" ScrollViewer.VerticalScrollBarVisibility="Auto" Width="Auto" Height="250" FontSize="12" FontWeight="Medium" Foreground="DarkSlateBlue" Margin="5,2,5,5" ItemsSource="{Binding Path=Points}" DisplayMemberPath="DisplayString"/>
            </Grid>
        </GroupBox>
        <Grid Grid.Row="2" Margin="5,10,0,5" HorizontalAlignment="Right">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="200"/>
            </Grid.ColumnDefinitions>
            <Label ToolTip="Color of the line" FontWeight="Normal" Content="Border Color:" HorizontalAlignment="Right" VerticalAlignment="Center"/>
            <xctk:ColorPicker Grid.Column="1" Margin="5,5,5,5" SelectedColor="{Binding Path=BorderColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            <Label ToolTip="Color to fill the rectangle" Grid.Row="1" FontWeight="Normal" Content="Fill Color:" HorizontalAlignment="Right" VerticalAlignment="Center"/>
            <xctk:ColorPicker Grid.Row="1" Grid.Column="1" Margin="5,5,5,5" SelectedColor="{Binding Path=FillColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            <CheckBox Grid.Row="2" Grid.Column="2" Content="Animate" HorizontalAlignment="Center" VerticalAlignment="Center" IsChecked="{Binding Path=Animate, UpdateSourceTrigger=PropertyChanged}"/>
            <Button Grid.Row="2" Grid.ColumnSpan="2" Content="Draw" BorderBrush="DarkSlateBlue" Padding="3" Margin="5" HorizontalAlignment="Right" Command="{Binding Path=DrawCommand}"/>
        </Grid>
    </Grid>
</UserControl>
